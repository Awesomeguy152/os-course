#ifndef MYSHELL_H
#define MYSHELL_H

/*
 * Заголовок объявляет вспомогательные функции и константы, используемые
 * реализацией учебной оболочки vtsh. Он не содержит логики, но предоставляет
 * внешнему коду сведения о размере массивов аргументов, строке приглашения и
 * публичных точках входа, необходимых тестам и исполняемым модулям.
 */

#include <sys/wait.h>  // определяет waitpid и макросы анализа статусов процессов
#include <time.h>      // структура timespec для измерения длительности команд
#include <unistd.h>    // базовые POSIX-вызовы (fork, exec, pipe) и константы

#define MAX_ARGS 128        // верхняя граница количества аргументов в parse_command_line
#define PROMPT "shell> "    // приглашение по умолчанию, используемое при интерактивном вводе


/**
 * Вычисляет разницу между временными отметками start и end, записывая результат
 * в структуру result. Используется при измерении длительностей команд.
 */
void calculate_timespec_diff(const struct timespec* start, const struct timespec* end, struct timespec* result);

/**
 * Разбирает строку line на массив аргументов (argv) и возвращает их количество
 * через argc_out. В массив добавляется завершающий NULL для совместимости с exec.
 */
char** parse_command_line(char* line, int* argc_out);

/**
 * Выполняет одну команду: обрабатывает встроенные команды, редиректы и запускает
 * внешние программы с измерением времени работы.
 */
int execute_command(char** argv);

/**
 * Обрабатывает последовательность команд, разделённых оператором &&, и поддерживает
 * фоновый запуск последней команды при наличии символа & в конце строки.
 */
void execute_with_and(char* line);

#endif